<div style="overflow: hidden;">
    <center>
        <button onclick="openGame()" style="background-color: #7e57c2; color: #fff; border: 1px solid #673ab7; font-size: 26px; width: 100%; cursor: pointer; border-radius: 10px;"> 
            Open Game 
        </button>
        <script>
            function openGame() {
                const url = "https://sz-games.github.io/Games-2/lol/";

                // If inside an iframe (like on NebulaPlay)
                if (window !== window.top) {
                    const iframe = document.createElement("iframe");
                    iframe.src = url;
                    iframe.style.position = "fixed";
                    iframe.style.top = "0";
                    iframe.style.left = "0";
                    iframe.style.width = "100vw";
                    iframe.style.height = "100vh";
                    iframe.style.border = "none";
                    iframe.allow = "fullscreen; pointer-lock"; // Important for mouse lock
                    document.body.innerHTML = ""; // Clear page
                    document.body.appendChild(iframe);

                    // Mouse lock on click
                    iframe.addEventListener("load", () => {
                        iframe.contentWindow.document.addEventListener("click", () => {
                            iframe.requestPointerLock?.() ||
                            iframe.webkitRequestPointerLock?.() ||
                            iframe.mozRequestPointerLock?.();
                        });
                    });
                } else {
                    // Open in new window (fallback)
                    const win = window.open("", "_blank", "width=800,height=600");

                    if (win) {
                        const iframe = win.document.createElement("iframe");
                        iframe.src = url;
                        iframe.style.position = "absolute";
                        iframe.style.top = "0";
                        iframe.style.left = "0";
                        iframe.style.width = "100%";
                        iframe.style.height = "100%";
                        iframe.style.border = "none";
                        iframe.allow = "fullscreen; pointer-lock";

                        win.document.body.style.margin = "0";
                        win.document.body.style.overflow = "hidden";
                        win.document.body.appendChild(iframe);

                        iframe.onload = function () {
                            // Try to fullscreen (must be called from user interaction)
                            const requestFullscreen = iframe.requestFullscreen ||
                                                      iframe.webkitRequestFullscreen ||
                                                      iframe.mozRequestFullScreen ||
                                                      iframe.msRequestFullscreen;
                            if (requestFullscreen) requestFullscreen.call(iframe);

                            // Enable pointer lock when clicked inside iframe
                            iframe.contentWindow.document.addEventListener("click", () => {
                                iframe.contentWindow.document.body.requestPointerLock?.();
                            });
                        };
                    } else {
                        alert("Popup blocked! Please allow popups for this site.");
                    }
                }
            }
        </script>
    </center>
</div>
